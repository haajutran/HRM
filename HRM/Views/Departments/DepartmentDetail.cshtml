@model Department
@{
    ViewBag.Title = ViewData["DepartmentName"];
}


<div id="content-header">
    <div id="breadcrumb"><a asp-controller="Employees" asp-action="Index" title="Quản lý nhân viên" class="tip-bottom"> Quản lý nhân viên </a></div>
</div>

<!--End-breadcrumbs-->
<!--Action boxes-->
<div class="container-fluid">
    <div style="text-align: center;margin: 2em;">
        <h2><b>@ViewData["DepartmentName"]</b></h2>
    </div>
    <div style="margin: auto;">
        <div asp-validation-summary="All" class="text-danger"></div>
        <div style="text-align: center;margin: 2em;">
            <h3><b>DANH SÁCH NHÂN VIÊN</b></h3>
        </div>
        <a class="btn btn-primary" asp-controller="Employees" asp-action="AddEmployee" style="margin-bottom: 2em;">Thêm Nhân Viên</a>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>MSNV</th>
                    <th>Tên nhân viên</th>
                    <th>Chức danh</th>
                    <th>Công việc</th>
                    <th>Mô tả</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var departmentTitle in Model.DepartmentTitles)
                {
                    <tr>
                        <td><a asp-controller="Employees" asp-action="EditEmployee" asp-route-employeeID="@departmentTitle.Employee.EmployeeID">@departmentTitle.Employee.EmployeeCode</a></td>
                        <td>@departmentTitle.Employee.FullName</td>
                        <td>@departmentTitle.Title</td>
                        <td>@departmentTitle.Employee.DepartmentTasks.Count</td>
                        <td>@departmentTitle.Description</td>
                        <td>
                            <form method="post">
                                <a class="btn btn-sm btn-primary" href="#">
                                    <i style="font-size: 20px" class="fa fa-pencil"></i>
                                </a>

                                <button type="submit"
                                        class="btn btn-sm btn-danger">
                                    <i style="font-size: 20px" class="fa fa-trash"></i>
                                </button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <div style="margin: auto;">
        <div asp-validation-summary="All" class="text-danger"></div>
        <div style="text-align: center;margin: 2em;">
            <h3><b>DANH SÁCH CÔNG VIỆC</b></h3>
        </div>
        <a class="btn btn-primary" asp-action="AddTask" asp-route-departmentID="@Model.DepartmentID" style="margin-bottom: 2em;">Thêm Công Việc</a>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>MSNV</th>
                    <th>Tên nhân viên</th>
                    <th>Chức danh</th>
                    <th>Tên công việc</th>
                    <th>Mô tả</th>
                    <th>Giờ làm</th>
                    <th><a asp-for="UpdateWorkHours" asp-route-departmentID="@Model.DepartmentID" class="btn btn-fill btn-block">Quản lý giờ làm</a></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var task in Model.DepartmentTasks)
                {
                    var thisEmployeeTitle = task.Employee.DepartmentTitles.FirstOrDefault().Title;
                    <tr>
                        <td><a asp-controller="Employees" asp-action="EditEmployee" asp-route-employeeID="@task.Employee.EmployeeID">@task.Employee.EmployeeCode</a></td>
                        <td>@task.Employee.FullName</td>
                        <td>@thisEmployeeTitle</td>
                        <td>@task.Title</td>
                        <td>@task.Description</td>
                        <td>@task.WorkHours</td>
                        <td>
                            <form method="post">
                                <a class="btn btn-sm btn-primary" href="#">
                                    <i style="font-size: 20px" class="fa fa-pencil"></i>
                                </a>

                                <button type="submit"
                                        class="btn btn-sm btn-danger">
                                    <i style="font-size: 20px" class="fa fa-trash"></i>
                                </button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>